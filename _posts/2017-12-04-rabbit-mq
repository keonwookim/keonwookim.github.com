---
layout: post
title: "2017/11/29 RabbitMQ 설치 & 설정"
---

# RabbitMQ

RabbitMQ 는 널리 이용되고 있는 메시지 큐 이다. AMQP (Advanced Message Queuing Protocol) 를 구현한 것중 하나이다. RabbitMQ 의 공식 홈페이지에서는 다음과 같이 설명하고 있다.

```
RabbitMQ is lightweight and easy to deploy on premises and in the cloud. It supports multiple messaging protocols. 
RabbitMQ can be deployed in distributed and federated configurations to meet high-scale, high-availability requirements.
```

* 경량
* 다양한 메시지 프로토콜 지원
* 분산시켜 배포함으로서 대규모, 고가용성 충족

정도의 특징이 있겠다. 이번 포스트에서는 RabbitMQ를 세팅하는 방법에 대해 알아보도록 하자.

# RabbitMQ 설치하기
## Erlang 설치
```
sudo yum intall erlang
```

## RabbitMQ 설치
```
sudo rpm --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc
sudo yum install rabbitmq-server-3.6.14-1.noarch.rpm
```

## RabbitMQ 실행하기
```
rabbitmq-server -detached
```

## RabbitMQ 중지하기
```
rabbitmqctl stop
```

## RabbitMQ 상태보기
```
rabbitmqctl status
```

# Clustering
## 얼랭 쿠키값 맞추기
RabbitMQ 에서는 각 노드들이 서로 통신을 하기위해서 erlang cookie 를 이용한다. 각 노드들은 erlang cookie를 공유해야한다. 
클러스터로 묶을 노드틀은 모두 같은 erlang cookie 값을 같은 값으로 맞춰줘야 한다. /var/lib/rabbitmq/.erlang.cookie 파일에 저장되어 있으며, 이 쿠키값을 복사해서 다른 노드에도 동일하게 저장한다.


